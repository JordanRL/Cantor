
<!doctype html>
<html lang="en" class="no-js">
  <head>
    
      <meta charset="utf-8">
      <meta name="viewport" content="width=device-width,initial-scale=1">
      
      
      
      
        <link rel="canonical" href="https://jordanrl.github.io/Fermat/getting-started/mutability/">
      
      <link rel="icon" href="../../assets/images/favicon.png">
      <meta name="generator" content="mkdocs-1.2.1, mkdocs-material-7.1.9">
    
    
      
        <title>Mutable vs. Immutable - Fermat - PHP Math Library</title>
      
    
    
      <link rel="stylesheet" href="../../assets/stylesheets/main.ca7ac06f.min.css">
      
        
        <link rel="stylesheet" href="../../assets/stylesheets/palette.f1a3b89f.min.css">
        
      
    
    
    
      
        
        <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
        <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Roboto:300,400,400i,700%7CRoboto+Mono&display=fallback">
        <style>:root{--md-text-font-family:"Roboto";--md-code-font-family:"Roboto Mono"}</style>
      
    
    
    
      <link rel="stylesheet" href="../../css/custom.css">
    
    
      


    
    
  </head>
  
  
    
    
      
    
    
    
    
    <body dir="ltr" data-md-color-scheme="default" data-md-color-primary="" data-md-color-accent="">
  
    
    <script>function __prefix(e){return new URL("../..",location).pathname+"."+e}function __get(e,t=localStorage){return JSON.parse(t.getItem(__prefix(e)))}</script>
    
      <script>var palette=__get("__palette");if(null!==palette&&"object"==typeof palette.color)for(var key in palette.color)document.body.setAttribute("data-md-color-"+key,palette.color[key])</script>
    
    <input class="md-toggle" data-md-toggle="drawer" type="checkbox" id="__drawer" autocomplete="off">
    <input class="md-toggle" data-md-toggle="search" type="checkbox" id="__search" autocomplete="off">
    <label class="md-overlay" for="__drawer"></label>
    <div data-md-component="skip">
      
        
        <a href="#mutability-in-php" class="md-skip">
          Skip to content
        </a>
      
    </div>
    <div data-md-component="announce">
      
    </div>
    
      <header class="md-header" data-md-component="header">
  <nav class="md-header__inner md-grid" aria-label="Header">
    <a href="../.." title="Fermat - PHP Math Library" class="md-header__button md-logo" aria-label="Fermat - PHP Math Library" data-md-component="logo">
      
  
  <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 8a3 3 0 0 0 3-3 3 3 0 0 0-3-3 3 3 0 0 0-3 3 3 3 0 0 0 3 3m0 3.54C9.64 9.35 6.5 8 3 8v11c3.5 0 6.64 1.35 9 3.54 2.36-2.19 5.5-3.54 9-3.54V8c-3.5 0-6.64 1.35-9 3.54z"/></svg>

    </a>
    <label class="md-header__button md-icon" for="__drawer">
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M3 6h18v2H3V6m0 5h18v2H3v-2m0 5h18v2H3v-2z"/></svg>
    </label>
    <div class="md-header__title" data-md-component="header-title">
      <div class="md-header__ellipsis">
        <div class="md-header__topic">
          <span class="md-ellipsis">
            Fermat - PHP Math Library
          </span>
        </div>
        <div class="md-header__topic" data-md-component="header-topic">
          <span class="md-ellipsis">
            
              Mutable vs. Immutable
            
          </span>
        </div>
      </div>
    </div>
    
      <form class="md-header__option" data-md-component="palette">
        
          
          
          <input class="md-option" data-md-color-media="(prefers-color-scheme: light)" data-md-color-scheme="default" data-md-color-primary="" data-md-color-accent=""  aria-label="Switch to dark mode"  type="radio" name="__palette" id="__palette_1">
          
            <label class="md-header__button md-icon" title="Switch to dark mode" for="__palette_2" hidden>
              <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M7 10a2 2 0 0 1 2 2 2 2 0 0 1-2 2 2 2 0 0 1-2-2 2 2 0 0 1 2-2m10-3a5 5 0 0 1 5 5 5 5 0 0 1-5 5H7a5 5 0 0 1-5-5 5 5 0 0 1 5-5h10M7 9a3 3 0 0 0-3 3 3 3 0 0 0 3 3h10a3 3 0 0 0 3-3 3 3 0 0 0-3-3H7z"/></svg>
            </label>
          
        
          
          
          <input class="md-option" data-md-color-media="(prefers-color-scheme: dark)" data-md-color-scheme="slate" data-md-color-primary="" data-md-color-accent=""  aria-label="Switch to light mode"  type="radio" name="__palette" id="__palette_2">
          
            <label class="md-header__button md-icon" title="Switch to light mode" for="__palette_1" hidden>
              <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M17 7H7a5 5 0 0 0-5 5 5 5 0 0 0 5 5h10a5 5 0 0 0 5-5 5 5 0 0 0-5-5m0 8a3 3 0 0 1-3-3 3 3 0 0 1 3-3 3 3 0 0 1 3 3 3 3 0 0 1-3 3z"/></svg>
            </label>
          
        
      </form>
    
    
    
      <label class="md-header__button md-icon" for="__search">
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.516 6.516 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5z"/></svg>
      </label>
      
<div class="md-search" data-md-component="search" role="dialog">
  <label class="md-search__overlay" for="__search"></label>
  <div class="md-search__inner" role="search">
    <form class="md-search__form" name="search">
      <input type="text" class="md-search__input" name="query" aria-label="Search" placeholder="Search" autocapitalize="off" autocorrect="off" autocomplete="off" spellcheck="false" data-md-component="search-query" data-md-state="active" required>
      <label class="md-search__icon md-icon" for="__search">
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.516 6.516 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5z"/></svg>
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11h12z"/></svg>
      </label>
      <button type="reset" class="md-search__icon md-icon" aria-label="Clear" tabindex="-1">
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M19 6.41 17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12 19 6.41z"/></svg>
      </button>
    </form>
    <div class="md-search__output">
      <div class="md-search__scrollwrap" data-md-scrollfix>
        <div class="md-search-result" data-md-component="search-result">
          <div class="md-search-result__meta">
            Initializing search
          </div>
          <ol class="md-search-result__list"></ol>
        </div>
      </div>
    </div>
  </div>
</div>
    
    
      <div class="md-header__source">
        
<a href="https://github.com/JordanRL/Fermat/" title="Go to repository" class="md-source" data-md-component="source">
  <div class="md-source__icon md-icon">
    
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 448 512"><path d="M439.55 236.05 244 40.45a28.87 28.87 0 0 0-40.81 0l-40.66 40.63 51.52 51.52c27.06-9.14 52.68 16.77 43.39 43.68l49.66 49.66c34.23-11.8 61.18 31 35.47 56.69-26.49 26.49-70.21-2.87-56-37.34L240.22 199v121.85c25.3 12.54 22.26 41.85 9.08 55a34.34 34.34 0 0 1-48.55 0c-17.57-17.6-11.07-46.91 11.25-56v-123c-20.8-8.51-24.6-30.74-18.64-45L142.57 101 8.45 235.14a28.86 28.86 0 0 0 0 40.81l195.61 195.6a28.86 28.86 0 0 0 40.8 0l194.69-194.69a28.86 28.86 0 0 0 0-40.81z"/></svg>
  </div>
  <div class="md-source__repository">
    GitHub
  </div>
</a>
      </div>
    
  </nav>
</header>
    
    <div class="md-container" data-md-component="container">
      
      
        
          
<nav class="md-tabs" aria-label="Tabs" data-md-component="tabs">
  <div class="md-tabs__inner md-grid">
    <ul class="md-tabs__list">
      
        
  
  


  <li class="md-tabs__item">
    <a href="../.." class="md-tabs__link">
      Introduction
    </a>
  </li>

      
        
  
  
    
  


  
  
  
    <li class="md-tabs__item">
      <a href="../concepts/" class="md-tabs__link md-tabs__link--active">
        Getting Started
      </a>
    </li>
  

      
        
  
  


  
  
  
    <li class="md-tabs__item">
      <a href="../../configuration/calculation-modes/" class="md-tabs__link">
        Configuration
      </a>
    </li>
  

      
        
  
  


  
  
  
    <li class="md-tabs__item">
      <a href="../../extending/abstracts.md" class="md-tabs__link">
        Extending
      </a>
    </li>
  

      
        
  
  


  
  
  
    

  
  
  
    <li class="md-tabs__item">
      <a href="../../roster/latest/Samsara/Fermat/Numbers/" class="md-tabs__link">
        Source Reference
      </a>
    </li>
  

  

      
    </ul>
  </div>
</nav>
        
      
      <main class="md-main" data-md-component="main">
        <div class="md-main__inner md-grid">
          
            
              
              <div class="md-sidebar md-sidebar--primary" data-md-component="sidebar" data-md-type="navigation" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    

  


<nav class="md-nav md-nav--primary md-nav--lifted" aria-label="Navigation" data-md-level="0">
  <label class="md-nav__title" for="__drawer">
    <a href="../.." title="Fermat - PHP Math Library" class="md-nav__button md-logo" aria-label="Fermat - PHP Math Library" data-md-component="logo">
      
  
  <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 8a3 3 0 0 0 3-3 3 3 0 0 0-3-3 3 3 0 0 0-3 3 3 3 0 0 0 3 3m0 3.54C9.64 9.35 6.5 8 3 8v11c3.5 0 6.64 1.35 9 3.54 2.36-2.19 5.5-3.54 9-3.54V8c-3.5 0-6.64 1.35-9 3.54z"/></svg>

    </a>
    Fermat - PHP Math Library
  </label>
  
    <div class="md-nav__source">
      
<a href="https://github.com/JordanRL/Fermat/" title="Go to repository" class="md-source" data-md-component="source">
  <div class="md-source__icon md-icon">
    
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 448 512"><path d="M439.55 236.05 244 40.45a28.87 28.87 0 0 0-40.81 0l-40.66 40.63 51.52 51.52c27.06-9.14 52.68 16.77 43.39 43.68l49.66 49.66c34.23-11.8 61.18 31 35.47 56.69-26.49 26.49-70.21-2.87-56-37.34L240.22 199v121.85c25.3 12.54 22.26 41.85 9.08 55a34.34 34.34 0 0 1-48.55 0c-17.57-17.6-11.07-46.91 11.25-56v-123c-20.8-8.51-24.6-30.74-18.64-45L142.57 101 8.45 235.14a28.86 28.86 0 0 0 0 40.81l195.61 195.6a28.86 28.86 0 0 0 40.8 0l194.69-194.69a28.86 28.86 0 0 0 0-40.81z"/></svg>
  </div>
  <div class="md-source__repository">
    GitHub
  </div>
</a>
    </div>
  
  <ul class="md-nav__list" data-md-scrollfix>
    
      
      
      

  
  
  
    <li class="md-nav__item">
      <a href="../.." class="md-nav__link">
        Introduction
      </a>
    </li>
  

    
      
      
      

  
  
    
  
  
    
    <li class="md-nav__item md-nav__item--active md-nav__item--nested">
      
      
        <input class="md-nav__toggle md-toggle" data-md-toggle="__nav_2" type="checkbox" id="__nav_2" checked>
      
      <label class="md-nav__link" for="__nav_2">
        Getting Started
        <span class="md-nav__icon md-icon"></span>
      </label>
      <nav class="md-nav" aria-label="Getting Started" data-md-level="1">
        <label class="md-nav__title" for="__nav_2">
          <span class="md-nav__icon md-icon"></span>
          Getting Started
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
  
  
  
    <li class="md-nav__item">
      <a href="../concepts/" class="md-nav__link">
        Concepts
      </a>
    </li>
  

          
            
  
  
  
    <li class="md-nav__item">
      <a href="../installation-and-usage/" class="md-nav__link">
        Installation & Usage
      </a>
    </li>
  

          
            
  
  
    
  
  
    <li class="md-nav__item md-nav__item--active">
      
      <input class="md-nav__toggle md-toggle" data-md-toggle="toc" type="checkbox" id="__toc">
      
      
        
      
      
      <a href="./" class="md-nav__link md-nav__link--active">
        Mutable vs. Immutable
      </a>
      
    </li>
  

          
            
  
  
  
    <li class="md-nav__item">
      <a href="../using-factories/" class="md-nav__link">
        Using The Factories
      </a>
    </li>
  

          
            
  
  
  
    <li class="md-nav__item">
      <a href="../direct-instantiation/" class="md-nav__link">
        Direct Instantiation
      </a>
    </li>
  

          
            
  
  
  
    <li class="md-nav__item">
      <a href="../comparing/" class="md-nav__link">
        Comparing Values
      </a>
    </li>
  

          
            
  
  
  
    <li class="md-nav__item">
      <a href="../exceptions/" class="md-nav__link">
        Handling Exceptions
      </a>
    </li>
  

          
        </ul>
      </nav>
    </li>
  

    
      
      
      

  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
        <input class="md-nav__toggle md-toggle" data-md-toggle="__nav_3" type="checkbox" id="__nav_3" >
      
      <label class="md-nav__link" for="__nav_3">
        Configuration
        <span class="md-nav__icon md-icon"></span>
      </label>
      <nav class="md-nav" aria-label="Configuration" data-md-level="1">
        <label class="md-nav__title" for="__nav_3">
          <span class="md-nav__icon md-icon"></span>
          Configuration
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
  
  
  
    <li class="md-nav__item">
      <a href="../../configuration/calculation-modes/" class="md-nav__link">
        Calculation Modes
      </a>
    </li>
  

          
            
  
  
  
    <li class="md-nav__item">
      <a href="../../configuration/rounding-modes/" class="md-nav__link">
        Rounding Modes
      </a>
    </li>
  

          
        </ul>
      </nav>
    </li>
  

    
      
      
      

  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
        <input class="md-nav__toggle md-toggle" data-md-toggle="__nav_4" type="checkbox" id="__nav_4" >
      
      <label class="md-nav__link" for="__nav_4">
        Extending
        <span class="md-nav__icon md-icon"></span>
      </label>
      <nav class="md-nav" aria-label="Extending" data-md-level="1">
        <label class="md-nav__title" for="__nav_4">
          <span class="md-nav__icon md-icon"></span>
          Extending
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
  
  
  
    <li class="md-nav__item">
      <a href="../../extending/abstracts.md" class="md-nav__link">
        Abstract Classes
      </a>
    </li>
  

          
        </ul>
      </nav>
    </li>
  

    
      
      
      

  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
        <input class="md-nav__toggle md-toggle" data-md-toggle="__nav_5" type="checkbox" id="__nav_5" >
      
      <label class="md-nav__link" for="__nav_5">
        Source Reference
        <span class="md-nav__icon md-icon"></span>
      </label>
      <nav class="md-nav" aria-label="Source Reference" data-md-level="1">
        <label class="md-nav__title" for="__nav_5">
          <span class="md-nav__icon md-icon"></span>
          Source Reference
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
  
  
  
    
      
    
    <li class="md-nav__item md-nav__item--section md-nav__item--nested">
      
      
        <input class="md-nav__toggle md-toggle" data-md-toggle="__nav_5_1" type="checkbox" id="__nav_5_1" >
      
      <label class="md-nav__link" for="__nav_5_1">
        Fermat
        <span class="md-nav__icon md-icon"></span>
      </label>
      <nav class="md-nav" aria-label="Fermat" data-md-level="2">
        <label class="md-nav__title" for="__nav_5_1">
          <span class="md-nav__icon md-icon"></span>
          Fermat
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
  
  
  
    <li class="md-nav__item">
      <a href="../../roster/latest/Samsara/Fermat/Numbers/" class="md-nav__link">
        Numbers
      </a>
    </li>
  

          
            
  
  
  
    <li class="md-nav__item">
      <a href="../../roster/latest/Samsara/Fermat/Collections/" class="md-nav__link">
        Collections
      </a>
    </li>
  

          
            
  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
        <input class="md-nav__toggle md-toggle" data-md-toggle="__nav_5_1_3" type="checkbox" id="__nav_5_1_3" >
      
      <label class="md-nav__link" for="__nav_5_1_3">
        Renderer
        <span class="md-nav__icon md-icon"></span>
      </label>
      <nav class="md-nav" aria-label="Renderer" data-md-level="3">
        <label class="md-nav__title" for="__nav_5_1_3">
          <span class="md-nav__icon md-icon"></span>
          Renderer
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
        <input class="md-nav__toggle md-toggle" data-md-toggle="__nav_5_1_3_1" type="checkbox" id="__nav_5_1_3_1" >
      
      <label class="md-nav__link" for="__nav_5_1_3_1">
        Components
        <span class="md-nav__icon md-icon"></span>
      </label>
      <nav class="md-nav" aria-label="Components" data-md-level="4">
        <label class="md-nav__title" for="__nav_5_1_3_1">
          <span class="md-nav__icon md-icon"></span>
          Components
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
        <input class="md-nav__toggle md-toggle" data-md-toggle="__nav_5_1_3_1_1" type="checkbox" id="__nav_5_1_3_1_1" >
      
      <label class="md-nav__link" for="__nav_5_1_3_1_1">
        Operations
        <span class="md-nav__icon md-icon"></span>
      </label>
      <nav class="md-nav" aria-label="Operations" data-md-level="5">
        <label class="md-nav__title" for="__nav_5_1_3_1_1">
          <span class="md-nav__icon md-icon"></span>
          Operations
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
  
  
  
    <li class="md-nav__item">
      <a href="../../roster/latest/Samsara/Fermat/Renderer/Components/Operations/PowOperation/" class="md-nav__link">
        PowOperation
      </a>
    </li>
  

          
        </ul>
      </nav>
    </li>
  

          
            
  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
        <input class="md-nav__toggle md-toggle" data-md-toggle="__nav_5_1_3_1_2" type="checkbox" id="__nav_5_1_3_1_2" >
      
      <label class="md-nav__link" for="__nav_5_1_3_1_2">
        Symbols
        <span class="md-nav__icon md-icon"></span>
      </label>
      <nav class="md-nav" aria-label="Symbols" data-md-level="5">
        <label class="md-nav__title" for="__nav_5_1_3_1_2">
          <span class="md-nav__icon md-icon"></span>
          Symbols
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
  
  
  
    <li class="md-nav__item">
      <a href="../../roster/latest/Samsara/Fermat/Renderer/Components/Symbols/ThetaSymbol/" class="md-nav__link">
        ThetaSymbol
      </a>
    </li>
  

          
        </ul>
      </nav>
    </li>
  

          
            
  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
        <input class="md-nav__toggle md-toggle" data-md-toggle="__nav_5_1_3_1_3" type="checkbox" id="__nav_5_1_3_1_3" >
      
      <label class="md-nav__link" for="__nav_5_1_3_1_3">
        Interfaces
        <span class="md-nav__icon md-icon"></span>
      </label>
      <nav class="md-nav" aria-label="Interfaces" data-md-level="5">
        <label class="md-nav__title" for="__nav_5_1_3_1_3">
          <span class="md-nav__icon md-icon"></span>
          Interfaces
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
  
  
  
    <li class="md-nav__item">
      <a href="../../roster/latest/Samsara/Fermat/Renderer/Components/Interfaces/ComponentInterface/" class="md-nav__link">
        ComponentInterface
      </a>
    </li>
  

          
        </ul>
      </nav>
    </li>
  

          
        </ul>
      </nav>
    </li>
  

          
            
  
  
  
    <li class="md-nav__item">
      <a href="../../roster/latest/Samsara/Fermat/Renderer/KatexRenderer/" class="md-nav__link">
        KatexRenderer
      </a>
    </li>
  

          
        </ul>
      </nav>
    </li>
  

          
            
  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
        <input class="md-nav__toggle md-toggle" data-md-toggle="__nav_5_1_4" type="checkbox" id="__nav_5_1_4" >
      
      <label class="md-nav__link" for="__nav_5_1_4">
        Values
        <span class="md-nav__icon md-icon"></span>
      </label>
      <nav class="md-nav" aria-label="Values" data-md-level="3">
        <label class="md-nav__title" for="__nav_5_1_4">
          <span class="md-nav__icon md-icon"></span>
          Values
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
  
  
  
    <li class="md-nav__item">
      <a href="../../roster/latest/Samsara/Fermat/Values/MutableDecimal/" class="md-nav__link">
        MutableDecimal
      </a>
    </li>
  

          
            
  
  
  
    <li class="md-nav__item">
      <a href="../../roster/latest/Samsara/Fermat/Values/ImmutableDecimal/" class="md-nav__link">
        ImmutableDecimal
      </a>
    </li>
  

          
            
  
  
  
    <li class="md-nav__item">
      <a href="../../roster/latest/Samsara/Fermat/Values/ImmutableFraction/" class="md-nav__link">
        ImmutableFraction
      </a>
    </li>
  

          
            
  
  
  
    <li class="md-nav__item">
      <a href="../../roster/latest/Samsara/Fermat/Values/MutableFraction/" class="md-nav__link">
        MutableFraction
      </a>
    </li>
  

          
        </ul>
      </nav>
    </li>
  

          
            
  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
        <input class="md-nav__toggle md-toggle" data-md-toggle="__nav_5_1_5" type="checkbox" id="__nav_5_1_5" >
      
      <label class="md-nav__link" for="__nav_5_1_5">
        Types
        <span class="md-nav__icon md-icon"></span>
      </label>
      <nav class="md-nav" aria-label="Types" data-md-level="3">
        <label class="md-nav__title" for="__nav_5_1_5">
          <span class="md-nav__icon md-icon"></span>
          Types
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
  
  
  
    <li class="md-nav__item">
      <a href="../../roster/latest/Samsara/Fermat/Types/Fraction/" class="md-nav__link">
        Fraction
      </a>
    </li>
  

          
            
  
  
  
    <li class="md-nav__item">
      <a href="../../roster/latest/Samsara/Fermat/Types/NumberCollection/" class="md-nav__link">
        NumberCollection
      </a>
    </li>
  

          
            
  
  
  
    <li class="md-nav__item">
      <a href="../../roster/latest/Samsara/Fermat/Types/Decimal/" class="md-nav__link">
        Decimal
      </a>
    </li>
  

          
            
  
  
  
    <li class="md-nav__item">
      <a href="../../roster/latest/Samsara/Fermat/Types/Tuple/" class="md-nav__link">
        Tuple
      </a>
    </li>
  

          
            
  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
        <input class="md-nav__toggle md-toggle" data-md-toggle="__nav_5_1_5_5" type="checkbox" id="__nav_5_1_5_5" >
      
      <label class="md-nav__link" for="__nav_5_1_5_5">
        Base
        <span class="md-nav__icon md-icon"></span>
      </label>
      <nav class="md-nav" aria-label="Base" data-md-level="4">
        <label class="md-nav__title" for="__nav_5_1_5_5">
          <span class="md-nav__icon md-icon"></span>
          Base
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
  
  
  
    <li class="md-nav__item">
      <a href="../../roster/latest/Samsara/Fermat/Types/Base/Selectable/" class="md-nav__link">
        Selectable
      </a>
    </li>
  

          
            
  
  
  
    <li class="md-nav__item">
      <a href="../../roster/latest/Samsara/Fermat/Types/Base/Number/" class="md-nav__link">
        Number
      </a>
    </li>
  

          
            
  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
        <input class="md-nav__toggle md-toggle" data-md-toggle="__nav_5_1_5_5_3" type="checkbox" id="__nav_5_1_5_5_3" >
      
      <label class="md-nav__link" for="__nav_5_1_5_5_3">
        Interfaces
        <span class="md-nav__icon md-icon"></span>
      </label>
      <nav class="md-nav" aria-label="Interfaces" data-md-level="5">
        <label class="md-nav__title" for="__nav_5_1_5_5_3">
          <span class="md-nav__icon md-icon"></span>
          Interfaces
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
        <input class="md-nav__toggle md-toggle" data-md-toggle="__nav_5_1_5_5_3_1" type="checkbox" id="__nav_5_1_5_5_3_1" >
      
      <label class="md-nav__link" for="__nav_5_1_5_5_3_1">
        Numbers
        <span class="md-nav__icon md-icon"></span>
      </label>
      <nav class="md-nav" aria-label="Numbers" data-md-level="6">
        <label class="md-nav__title" for="__nav_5_1_5_5_3_1">
          <span class="md-nav__icon md-icon"></span>
          Numbers
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
  
  
  
    <li class="md-nav__item">
      <a href="../../roster/latest/Samsara/Fermat/Types/Base/Interfaces/Numbers/NumberInterface/" class="md-nav__link">
        NumberInterface
      </a>
    </li>
  

          
            
  
  
  
    <li class="md-nav__item">
      <a href="../../roster/latest/Samsara/Fermat/Types/Base/Interfaces/Numbers/DecimalInterface/" class="md-nav__link">
        DecimalInterface
      </a>
    </li>
  

          
            
  
  
  
    <li class="md-nav__item">
      <a href="../../roster/latest/Samsara/Fermat/Types/Base/Interfaces/Numbers/FractionInterface/" class="md-nav__link">
        FractionInterface
      </a>
    </li>
  

          
            
  
  
  
    <li class="md-nav__item">
      <a href="../../roster/latest/Samsara/Fermat/Types/Base/Interfaces/Numbers/SimpleNumberInterface/" class="md-nav__link">
        SimpleNumberInterface
      </a>
    </li>
  

          
        </ul>
      </nav>
    </li>
  

          
            
  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
        <input class="md-nav__toggle md-toggle" data-md-toggle="__nav_5_1_5_5_3_2" type="checkbox" id="__nav_5_1_5_5_3_2" >
      
      <label class="md-nav__link" for="__nav_5_1_5_5_3_2">
        Characteristics
        <span class="md-nav__icon md-icon"></span>
      </label>
      <nav class="md-nav" aria-label="Characteristics" data-md-level="6">
        <label class="md-nav__title" for="__nav_5_1_5_5_3_2">
          <span class="md-nav__icon md-icon"></span>
          Characteristics
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
  
  
  
    <li class="md-nav__item">
      <a href="../../roster/latest/Samsara/Fermat/Types/Base/Interfaces/Characteristics/BaseConversionInterface/" class="md-nav__link">
        BaseConversionInterface
      </a>
    </li>
  

          
        </ul>
      </nav>
    </li>
  

          
            
  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
        <input class="md-nav__toggle md-toggle" data-md-toggle="__nav_5_1_5_5_3_3" type="checkbox" id="__nav_5_1_5_5_3_3" >
      
      <label class="md-nav__link" for="__nav_5_1_5_5_3_3">
        Groups
        <span class="md-nav__icon md-icon"></span>
      </label>
      <nav class="md-nav" aria-label="Groups" data-md-level="6">
        <label class="md-nav__title" for="__nav_5_1_5_5_3_3">
          <span class="md-nav__icon md-icon"></span>
          Groups
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
  
  
  
    <li class="md-nav__item">
      <a href="../../roster/latest/Samsara/Fermat/Types/Base/Interfaces/Groups/NumberCollectionInterface/" class="md-nav__link">
        NumberCollectionInterface
      </a>
    </li>
  

          
        </ul>
      </nav>
    </li>
  

          
        </ul>
      </nav>
    </li>
  

          
        </ul>
      </nav>
    </li>
  

          
            
  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
        <input class="md-nav__toggle md-toggle" data-md-toggle="__nav_5_1_5_6" type="checkbox" id="__nav_5_1_5_6" >
      
      <label class="md-nav__link" for="__nav_5_1_5_6">
        Traits
        <span class="md-nav__icon md-icon"></span>
      </label>
      <nav class="md-nav" aria-label="Traits" data-md-level="4">
        <label class="md-nav__title" for="__nav_5_1_5_6">
          <span class="md-nav__icon md-icon"></span>
          Traits
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
  
  
  
    <li class="md-nav__item">
      <a href="../../roster/latest/Samsara/Fermat/Types/Traits/ComparisonTrait/" class="md-nav__link">
        ComparisonTrait
      </a>
    </li>
  

          
            
  
  
  
    <li class="md-nav__item">
      <a href="../../roster/latest/Samsara/Fermat/Types/Traits/ArithmeticSimpleTrait/" class="md-nav__link">
        ArithmeticSimpleTrait
      </a>
    </li>
  

          
            
  
  
  
    <li class="md-nav__item">
      <a href="../../roster/latest/Samsara/Fermat/Types/Traits/IntegerMathTrait/" class="md-nav__link">
        IntegerMathTrait
      </a>
    </li>
  

          
            
  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
        <input class="md-nav__toggle md-toggle" data-md-toggle="__nav_5_1_5_6_4" type="checkbox" id="__nav_5_1_5_6_4" >
      
      <label class="md-nav__link" for="__nav_5_1_5_6_4">
        Arithmetic
        <span class="md-nav__icon md-icon"></span>
      </label>
      <nav class="md-nav" aria-label="Arithmetic" data-md-level="5">
        <label class="md-nav__title" for="__nav_5_1_5_6_4">
          <span class="md-nav__icon md-icon"></span>
          Arithmetic
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
  
  
  
    <li class="md-nav__item">
      <a href="../../roster/latest/Samsara/Fermat/Types/Traits/Arithmetic/ArithmeticSelectionTrait/" class="md-nav__link">
        ArithmeticSelectionTrait
      </a>
    </li>
  

          
            
  
  
  
    <li class="md-nav__item">
      <a href="../../roster/latest/Samsara/Fermat/Types/Traits/Arithmetic/ArithmeticScaleTrait/" class="md-nav__link">
        ArithmeticScaleTrait
      </a>
    </li>
  

          
            
  
  
  
    <li class="md-nav__item">
      <a href="../../roster/latest/Samsara/Fermat/Types/Traits/Arithmetic/ArithmeticNativeTrait/" class="md-nav__link">
        ArithmeticNativeTrait
      </a>
    </li>
  

          
        </ul>
      </nav>
    </li>
  

          
            
  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
        <input class="md-nav__toggle md-toggle" data-md-toggle="__nav_5_1_5_6_5" type="checkbox" id="__nav_5_1_5_6_5" >
      
      <label class="md-nav__link" for="__nav_5_1_5_6_5">
        Decimal
        <span class="md-nav__icon md-icon"></span>
      </label>
      <nav class="md-nav" aria-label="Decimal" data-md-level="5">
        <label class="md-nav__title" for="__nav_5_1_5_6_5">
          <span class="md-nav__icon md-icon"></span>
          Decimal
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
  
  
  
    <li class="md-nav__item">
      <a href="../../roster/latest/Samsara/Fermat/Types/Traits/Decimal/ScaleTrait/" class="md-nav__link">
        ScaleTrait
      </a>
    </li>
  

          
            
  
  
  
    <li class="md-nav__item">
      <a href="../../roster/latest/Samsara/Fermat/Types/Traits/Decimal/InverseTrigonometryTrait/" class="md-nav__link">
        InverseTrigonometryTrait
      </a>
    </li>
  

          
            
  
  
  
    <li class="md-nav__item">
      <a href="../../roster/latest/Samsara/Fermat/Types/Traits/Decimal/TrigonometryTrait/" class="md-nav__link">
        TrigonometryTrait
      </a>
    </li>
  

          
            
  
  
  
    <li class="md-nav__item">
      <a href="../../roster/latest/Samsara/Fermat/Types/Traits/Decimal/LogTrait/" class="md-nav__link">
        LogTrait
      </a>
    </li>
  

          
        </ul>
      </nav>
    </li>
  

          
        </ul>
      </nav>
    </li>
  

          
        </ul>
      </nav>
    </li>
  

          
            
  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
        <input class="md-nav__toggle md-toggle" data-md-toggle="__nav_5_1_6" type="checkbox" id="__nav_5_1_6" >
      
      <label class="md-nav__link" for="__nav_5_1_6">
        Provider
        <span class="md-nav__icon md-icon"></span>
      </label>
      <nav class="md-nav" aria-label="Provider" data-md-level="3">
        <label class="md-nav__title" for="__nav_5_1_6">
          <span class="md-nav__icon md-icon"></span>
          Provider
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
  
  
  
    <li class="md-nav__item">
      <a href="../../roster/latest/Samsara/Fermat/Provider/TrigonometryProvider/" class="md-nav__link">
        TrigonometryProvider
      </a>
    </li>
  

          
            
  
  
  
    <li class="md-nav__item">
      <a href="../../roster/latest/Samsara/Fermat/Provider/SeriesProvider/" class="md-nav__link">
        SeriesProvider
      </a>
    </li>
  

          
            
  
  
  
    <li class="md-nav__item">
      <a href="../../roster/latest/Samsara/Fermat/Provider/RoundingProvider/" class="md-nav__link">
        RoundingProvider
      </a>
    </li>
  

          
            
  
  
  
    <li class="md-nav__item">
      <a href="../../roster/latest/Samsara/Fermat/Provider/ConstantProvider/" class="md-nav__link">
        ConstantProvider
      </a>
    </li>
  

          
            
  
  
  
    <li class="md-nav__item">
      <a href="../../roster/latest/Samsara/Fermat/Provider/SequenceProvider/" class="md-nav__link">
        SequenceProvider
      </a>
    </li>
  

          
            
  
  
  
    <li class="md-nav__item">
      <a href="../../roster/latest/Samsara/Fermat/Provider/ArithmeticProvider/" class="md-nav__link">
        ArithmeticProvider
      </a>
    </li>
  

          
            
  
  
  
    <li class="md-nav__item">
      <a href="../../roster/latest/Samsara/Fermat/Provider/RandomProvider/" class="md-nav__link">
        RandomProvider
      </a>
    </li>
  

          
        </ul>
      </nav>
    </li>
  

          
        </ul>
      </nav>
    </li>
  

          
        </ul>
      </nav>
    </li>
  

    
  </ul>
</nav>
                  </div>
                </div>
              </div>
            
            
              
              <div class="md-sidebar md-sidebar--secondary" data-md-component="sidebar" data-md-type="toc" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    
<nav class="md-nav md-nav--secondary" aria-label="Table of contents">
  
  
  
    
  
  
</nav>
                  </div>
                </div>
              </div>
            
          
          <div class="md-content" data-md-component="content">
            <article class="md-content__inner md-typeset">
              
                
                  <a href="https://github.com/JordanRL/Fermat/edit/master/docs/getting-started/mutability.md" title="Edit this page" class="md-content__button md-icon">
                    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20.71 7.04c.39-.39.39-1.04 0-1.41l-2.34-2.34c-.37-.39-1.02-.39-1.41 0l-1.84 1.83 3.75 3.75M3 17.25V21h3.75L17.81 9.93l-3.75-3.75L3 17.25z"/></svg>
                  </a>
                
                
                <h1 id="mutability-in-php">Mutability In PHP</h1>
<p>Mutability is a property of instances of objects in object oriented languages. It refers to whether or not a method on the object changes the data referenced by that object's pointer (or in the case of PHP, its zval). If the method changes the data referenced by the object's zval, it is considered to be mutable. If the method does not change the data referenced, it is considered immutable.</p>
<p>In general, mutable objects have no memory of their previous states and evolve with the code as more operations are performed on them. Most objects that represent database results are mutable, such as those used in Doctrine or Eloquent. This reflects two properties of database results:</p>
<ol>
<li>A change in the data should still point to the same database entry.</li>
<li>There should only ever be one set of data associated with a single database entry.</li>
</ol>
<p>Thus, mutability is not a situation where all objects should be one way or the other, rather it depends on what the meaning of the data contained in the object is.</p>
<p>In PHP, mutability comes with the additional issue of scoping. For most purposes, objects can be treated as if they are passed by-reference at all times.</p>
<div class="admonition see-also">
<p class="admonition-title">See Also</p>
<p>The PHP Documentation contains examples on the specifics of how objects are passed between scopes. While it isn't exactly the same as passing by reference, it behaves in a very similar way in most situations.</p>
<p>See the <a href="https://www.php.net/manual/en/language.oop5.references.php">php.net page</a> for more information.</p>
</div>
<p>This is not an issue for some applications, mainly those where all operations are treated as atomic. However, this is not the case for many mathematical operations.</p>
<h1 id="mutability-in-fermat">Mutability In Fermat</h1>
<p>Because of these factors, mutability in Fermat is generally left up to the developer using the library. Both mutable and immutable implementations are provided for most values, and the developer using Fermat is asked to choose which type they want at the time it is created.</p>
<div class="admonition tip">
<p class="admonition-title">Mutables Are For Niche Use-Cases In This Library</p>
<p>Although there are real use-cases for having a mutable numeric value, as detailed within this page, mutables generally make little sense for numeric types, such as <code>integer</code> or <code>float</code>. The values in this library should be treated more like numeric types that have fluent object interfaces than like normal PHP objects.</p>
<p>For this reason, most developers in most situations should use the immutable types provided in this library. Immutables are returned automatically in all situations where the library generates or creates a number, such as from the <code>SequenceProvider</code> or from <code>Numbers::makePi()</code>.</p>
<p>Unless you are absolutely certain that your use-case calls for a mutable numeric, it is generally safer to use the immutable values. Mutables have been provided to support specific behaviors seen for native <code>integer</code> and <code>float</code> types, namely reassignment operators like <code>+=</code> and <code>/=</code>.</p>
</div>
<p>The exceptions to this rule are usually noted within this documentation, and nearly always represent an underlying data-structure that should always be treated one way or the other.</p>
<p>In other cases, such as with implementations of the <code>Coordinate</code> abstract class, the reasons for making all the value classes one way or the other are related to the underlying math concepts they are meant to represent having some of the same properties as database results: that they should always point to the same dataset and that there should only ever be one representation of a given dataset.</p>
<h1 id="choosing-between-the-two">Choosing Between The Two</h1>
<p>Which format you use is entirely up to you, but there are some situations that lend themselves more to one instead of the other.</p>
<p>First, lets look at the differences in your code that using one or the other might cause by taking the number 5 and adding 10.</p>
<div class="admonition example">
<p class="admonition-title">Example 1: Basic Usage Of Both</p>
<div class="tabbed-set" data-tabs="1:2"><input checked="checked" id="__tabbed_1_1" name="__tabbed_1" type="radio" /><label for="__tabbed_1_1">Immutable</label><div class="tabbed-content">
<div class="highlight"><pre><span></span><code><span class="linenos"> 1</span><span class="cp">&lt;?php</span>
<span class="linenos"> 2</span>
<span class="linenos"> 3</span><span class="k">use</span> <span class="nx">Samsara\Fermat\Values\ImmutableDecimal</span><span class="p">;</span>
<span class="linenos"> 4</span>
<span class="linenos"> 5</span><span class="nv">$balance</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">ImmutableDecimal</span><span class="p">(</span><span class="mi">5</span><span class="p">);</span>
<span class="linenos"> 6</span>
<span class="linenos"> 7</span><span class="nv">$newBalance</span> <span class="o">=</span> <span class="nv">$balance</span><span class="o">-&gt;</span><span class="na">add</span><span class="p">(</span><span class="mi">10</span><span class="p">);</span>
<span class="linenos"> 8</span>
<span class="linenos"> 9</span><span class="k">echo</span> <span class="s1">&#39;Current Balance: &#39;</span><span class="o">.</span><span class="nv">$newBalance</span><span class="o">-&gt;</span><span class="na">getValue</span><span class="p">();</span>
<span class="linenos">10</span><span class="c1">// Prints: &#39;Current Balance: 15&#39;</span>
</code></pre></div>
</div>
<input id="__tabbed_1_2" name="__tabbed_1" type="radio" /><label for="__tabbed_1_2">Mutable</label><div class="tabbed-content">
<div class="highlight"><pre><span></span><code><span class="linenos"> 1</span><span class="cp">&lt;?php</span>
<span class="linenos"> 2</span>
<span class="linenos"> 3</span><span class="k">use</span> <span class="nx">Samsara\Fermat\Values\MutableDecimal</span><span class="p">;</span>
<span class="linenos"> 4</span>
<span class="linenos"> 5</span><span class="nv">$balance</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">MutableDecimal</span><span class="p">(</span><span class="mi">5</span><span class="p">);</span>
<span class="linenos"> 6</span>
<span class="linenos"> 7</span><span class="nv">$balance</span><span class="o">-&gt;</span><span class="na">add</span><span class="p">(</span><span class="mi">10</span><span class="p">);</span>
<span class="linenos"> 8</span>
<span class="linenos"> 9</span><span class="k">echo</span> <span class="s1">&#39;Current Balance: &#39;</span><span class="o">.</span><span class="nv">$balance</span><span class="o">-&gt;</span><span class="na">getValue</span><span class="p">();</span>
<span class="linenos">10</span><span class="c1">// Prints: &#39;Current Balance: 15&#39;</span>
</code></pre></div>
</div>
</div>
</div>
<h3 id="how-to-create-equivalence-between-the-two">How To Create Equivalence Between the Two</h3>
<p>In general, you can get the behavior of mutable objects with immutable objects by reassigning the new value to the same variable. This allows the state of the variable to evolve throughout the program, and results in the instance that was referenced in the previous line having its zval count reduced to zero. This allows garbage collection in PHP to periodically clean up all your orphaned instances.</p>
<p>So then, why ever use immutable objects? It seems like using immutables will use a much larger amount of memory while doing the same exact thing. Well, consider the next example.</p>
<div class="admonition example">
<p class="admonition-title">Example 2: Side Effects</p>
<div class="tabbed-set" data-tabs="2:2"><input checked="checked" id="__tabbed_2_1" name="__tabbed_2" type="radio" /><label for="__tabbed_2_1">Immutable</label><div class="tabbed-content">
<div class="highlight"><pre><span></span><code><span class="linenos"> 1</span><span class="cp">&lt;?php</span>
<span class="linenos"> 2</span>
<span class="linenos"> 3</span><span class="k">use</span> <span class="nx">Samsara\Fermat\Values\ImmutableDecimal</span><span class="p">;</span>
<span class="linenos"> 4</span>
<span class="linenos"> 5</span><span class="nv">$oldBalance</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">ImmutableDecimal</span><span class="p">(</span><span class="mi">5</span><span class="p">);</span>
<span class="linenos"> 6</span><span class="nv">$deposit</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">ImmutableDecimal</span><span class="p">(</span><span class="mi">10</span><span class="p">);</span>
<span class="linenos"> 7</span>
<span class="linenos"> 8</span><span class="nv">$newBalance</span> <span class="o">=</span> <span class="nv">$oldBalance</span><span class="o">-&gt;</span><span class="na">add</span><span class="p">(</span><span class="nv">$deposit</span><span class="p">);</span>
<span class="linenos"> 9</span>
<span class="linenos">10</span><span class="k">echo</span> <span class="s1">&#39;Original Balance: &#39;</span><span class="o">.</span><span class="nv">$oldBalance</span><span class="o">.</span><span class="nx">PHP_EOL</span><span class="p">;</span>
<span class="linenos">11</span><span class="k">echo</span> <span class="s1">&#39;Deposit: &#39;</span><span class="o">.</span><span class="nv">$deposit</span><span class="o">.</span><span class="nx">PHP_EOL</span><span class="p">;</span>
<span class="linenos">12</span><span class="k">echo</span> <span class="s1">&#39;Current Balance: &#39;</span><span class="o">.</span><span class="nv">$newBalance</span><span class="p">;</span>
<span class="linenos">13</span><span class="c1">// Prints:</span>
<span class="linenos">14</span><span class="c1">// Original Balance: 5</span>
<span class="linenos">15</span><span class="c1">// Deposit: 10</span>
<span class="linenos">16</span><span class="c1">// Current Balance: 15</span>
</code></pre></div>
</div>
<input id="__tabbed_2_2" name="__tabbed_2" type="radio" /><label for="__tabbed_2_2">Mutable</label><div class="tabbed-content">
<div class="highlight"><pre><span></span><code><span class="linenos"> 1</span><span class="cp">&lt;?php</span>
<span class="linenos"> 2</span>
<span class="linenos"> 3</span><span class="k">use</span> <span class="nx">Samsara\Fermat\Values\MutableDecimal</span><span class="p">;</span>
<span class="linenos"> 4</span>
<span class="linenos"> 5</span><span class="nv">$oldBalance</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">MutableDecimal</span><span class="p">(</span><span class="mi">5</span><span class="p">);</span>
<span class="linenos"> 6</span><span class="nv">$deposit</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">MutableDecimal</span><span class="p">(</span><span class="mi">10</span><span class="p">);</span>
<span class="linenos"> 7</span>
<span class="linenos"> 8</span><span class="nv">$newBalance</span> <span class="o">=</span> <span class="nv">$oldBalance</span><span class="o">-&gt;</span><span class="na">add</span><span class="p">(</span><span class="nv">$deposit</span><span class="p">);</span>
<span class="linenos"> 9</span>
<span class="linenos">10</span><span class="k">echo</span> <span class="s1">&#39;Original Balance: &#39;</span><span class="o">.</span><span class="nv">$oldBalance</span><span class="o">.</span><span class="nx">PHP_EOL</span><span class="p">;</span>
<span class="linenos">11</span><span class="k">echo</span> <span class="s1">&#39;Deposit: &#39;</span><span class="o">.</span><span class="nv">$deposit</span><span class="o">.</span><span class="nx">PHP_EOL</span><span class="p">;</span>
<span class="linenos">12</span><span class="k">echo</span> <span class="s1">&#39;Current Balance: &#39;</span><span class="o">.</span><span class="nv">$newBalance</span><span class="p">;</span>
<span class="linenos">13</span><span class="c1">// Prints:</span>
<span class="linenos">14</span><span class="c1">// Original Balance: 15</span>
<span class="linenos">15</span><span class="c1">// Deposit: 10</span>
<span class="linenos">16</span><span class="c1">// Current Balance: 15</span>
</code></pre></div>
</div>
</div>
</div>
<h3 id="side-effects-and-consistency">Side Effects and Consistency</h3>
<p>As we can see from the second set of examples, <em>assigning a value from a mutable function call can have side effects beyond the variable assignment</em>. In fact, preserving the value of the original object requires a lot of attention to detail in the calling code. To achieve the same result as the immutable example with the mutable example, we would need to make a whole new object just for the calculation, which would look something like this:</p>
<div class="admonition example">
<p class="admonition-title">Example 3: Mutables Used Without Side Effects</p>
<div class="highlight"><pre><span></span><code><span class="linenos"> 1</span><span class="cp">&lt;?php</span> 
<span class="linenos"> 2</span><span class="k">use</span> <span class="nx">Samsara\Fermat\Values\MutableDecimal</span><span class="p">;</span>
<span class="linenos"> 3</span>
<span class="linenos"> 4</span><span class="nv">$oldBalance</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">MutableDecimal</span><span class="p">(</span><span class="mi">5</span><span class="p">);</span>
<span class="linenos"> 5</span><span class="nv">$deposit</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">MutableDecimal</span><span class="p">(</span><span class="mi">10</span><span class="p">);</span>
<span class="linenos"> 6</span>
<span class="linenos"> 7</span><span class="nv">$newBalance</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">MutableDecimal</span><span class="p">(</span><span class="nv">$oldBalance</span><span class="o">-&gt;</span><span class="na">getValue</span><span class="p">());</span>
<span class="linenos"> 8</span><span class="nv">$newBalance</span><span class="o">-&gt;</span><span class="na">add</span><span class="p">(</span><span class="nv">$deposit</span><span class="p">);</span>
<span class="linenos"> 9</span>
<span class="linenos">10</span><span class="k">echo</span> <span class="s1">&#39;Original Balance: &#39;</span><span class="o">.</span><span class="nv">$oldBalance</span><span class="o">.</span><span class="nx">PHP_EOL</span><span class="p">;</span>
<span class="linenos">11</span><span class="k">echo</span> <span class="s1">&#39;Deposit: &#39;</span><span class="o">.</span><span class="nv">$deposit</span><span class="o">.</span><span class="nx">PHP_EOL</span><span class="p">;</span>
<span class="linenos">12</span><span class="k">echo</span> <span class="s1">&#39;Current Balance: &#39;</span><span class="o">.</span><span class="nv">$newBalance</span><span class="p">;</span>
<span class="linenos">13</span><span class="c1">// Prints:</span>
<span class="linenos">14</span><span class="c1">// Original Balance: 5</span>
<span class="linenos">15</span><span class="c1">// Deposit: 10</span>
<span class="linenos">16</span><span class="c1">// Current Balance: 15</span>
</code></pre></div>
</div>
<p>Creating a new object on the fly to perform a calculation is in fact exactly how the implementation of immutables in Fermat is accomplished. Internally, any time a calculation has been performed, the new string with the resulting answer is stored in a newly created instance, instead of the instance that initiated the calculation.</p>
<p>This can be seen if you look at the different implementations of the <code>setValue()</code> abstract method in the <code>ImmutableDecimal</code> and <code>MutableDecimal</code> classes.</p>
<div class="admonition example">
<p class="admonition-title">Implementations Of setValue()</p>
<div class="tabbed-set" data-tabs="3:2"><input checked="checked" id="__tabbed_3_1" name="__tabbed_3" type="radio" /><label for="__tabbed_3_1">ImmutableDecimal</label><div class="tabbed-content">
<div class="highlight"><pre><span></span><code><span class="linenos">1</span><span class="cp">&lt;?php</span>
<span class="linenos">2</span><span class="k">class</span> <span class="nc">ImmutableDecimal</span> <span class="p">{</span>
<span class="linenos">3</span>  <span class="k">protected</span> <span class="k">function</span> <span class="nf">setValue</span><span class="p">(</span><span class="nv">$value</span><span class="p">,</span> <span class="nv">$scale</span> <span class="o">=</span> <span class="k">null</span><span class="p">,</span> <span class="nv">$base</span> <span class="o">=</span> <span class="mi">10</span><span class="p">)</span>
<span class="linenos">4</span>  <span class="p">{</span>
<span class="linenos">5</span>    <span class="cm">/* omitted transformations and sanity checks */</span>
<span class="linenos">6</span>
<span class="linenos">7</span>    <span class="k">return</span> <span class="k">new</span> <span class="nx">ImmutableDecimal</span><span class="p">(</span><span class="nv">$value</span><span class="p">,</span> <span class="nv">$scale</span><span class="p">,</span> <span class="nv">$base</span><span class="p">);</span>
<span class="linenos">8</span>  <span class="p">}</span>
<span class="linenos">9</span><span class="p">}</span>
</code></pre></div>
</div>
<input id="__tabbed_3_2" name="__tabbed_3" type="radio" /><label for="__tabbed_3_2">MutableDecimal</label><div class="tabbed-content">
<div class="highlight"><pre><span></span><code><span class="linenos"> 1</span><span class="cp">&lt;?php</span>
<span class="linenos"> 2</span><span class="k">class</span> <span class="nc">MutableDecimal</span> <span class="p">{</span>
<span class="linenos"> 3</span>  <span class="k">protected</span> <span class="k">function</span> <span class="nf">setValue</span><span class="p">(</span><span class="nv">$value</span><span class="p">,</span> <span class="nv">$scale</span> <span class="o">=</span> <span class="k">null</span><span class="p">,</span> <span class="nv">$base</span> <span class="o">=</span> <span class="mi">10</span><span class="p">)</span>
<span class="linenos"> 4</span>  <span class="p">{</span>
<span class="linenos"> 5</span>    <span class="cm">/* omitted transformations and sanity checks */</span>
<span class="linenos"> 6</span>
<span class="linenos"> 7</span>    <span class="nv">$this</span><span class="o">-&gt;</span><span class="na">value</span> <span class="o">=</span> <span class="nv">$this</span><span class="o">-&gt;</span><span class="na">translateValue</span><span class="p">(</span><span class="nv">$value</span><span class="p">);</span>
<span class="linenos"> 8</span>
<span class="linenos"> 9</span>    <span class="k">return</span> <span class="nv">$this</span><span class="p">;</span>
<span class="linenos">10</span>  <span class="p">}</span>
<span class="linenos">11</span><span class="p">}</span>
</code></pre></div>
</div>
</div>
</div>
<p>The <code>ImmutableDecimal</code> implementation returns a new instance, while the <code>MutableDecimal</code> implementation sets the internal <code>$value</code> property directly and returns the current instance. This is the only meaningful difference between the two classes.</p>
<div class="admonition note">
<p class="admonition-title">setValue() As A Protected Method</p>
<p>For both mutable and immutable values, the <code>setValue()</code> method has a visibility of <code>protected</code>, preventing the calling scope from using it. This is intentional, as the values in these objects are meant to represent something closer to a memory address than a normal variable.</p>
<p>Allowing <code>setValue()</code> to be called directly, even for mutable objects, could lead to some of the same problems that make memory address safety an issue for desktop applications. </p>
<p>Each instance can instead be seen as a <a href="https://en.wikipedia.org/wiki/Finite-state_machine">Finite-State Machine</a> that evolves according to the state transitions defined on the object, i.e. the mathematical methods that are available on that class.</p>
<p>This correctly reflects how math itself works, and helps prevent the developer from accidentally "breaking" math by inadvertantly inserting erroneous data in the middle of a series of calculations.</p>
</div>
<p>In this way, the immutable values act as time saving measures and sanity preserving measures in the case that you want to ensure side effects don't occur. Instead of manually creating new instances for every calculation and running the risk of forgetting on one line in a large program, you can simply request an instance of <code>ImmutableDecimal</code> and it will do so automatically.</p>
<p>The downside to this is that the newly created object is not referenced anywhere except in the return value. Without a reference, the object becomes inaccessible if you do not assign the returned result to a variable in the calling scope.</p>
<h3 id="guidelines-on-when-to-use-each">Guidelines On When To Use Each</h3>
<p>Again, the exact usage of either is up to the developer, and it is <em>possible</em> to accomplish the same end result with either if the right design patterns are used. However, below is a brief rundown of when each is <em>generally</em> preferable.</p>
<h4 id="mutables-may-be-preferred-when">Mutables May Be Preferred When</h4>
<ul>
<li>The number represents a physical state or evolving state that can only move in one direction, such as with a hashing function</li>
<li>The number represents a value which always depends on its previous value, such as recursively calculating a sum, or compiling changes to a total from a ledger of financial entries</li>
<li>The number represents a value that has defined state-dependent behavior, such as in a <a href="https://en.wikipedia.org/wiki/Finite-state_machine">State Machine</a></li>
</ul>
<h4 id="immutables-may-be-preferred-when">Immutables May Be Preferred When</h4>
<ul>
<li>The number represents data that may be used in multiple, unrelated contexts, such as using a User ID to calculate other values</li>
<li>The number represents a concrete state, and the result of the equation will be a derived or dynamically generated value that doesn't actually exist within the data, such as using a population value to estimate average income</li>
<li>The number represents a value that may be used multiple times for separate calculations without changing, such as the mean in a normal distribution</li>
</ul>
<p>In general, for any given situation, one of these options will lead to cleaner, simpler, and easier to maintain code, while the other will lead to more fragile, harder to understand, and difficult to maintain code.</p>
<p>Which is which depends very much on the specific usage of that piece of data within your application.</p>
                
              
              
                


              
            </article>
          </div>
        </div>
        
          <a href="#" class="md-top md-icon" title="Back to top" data-md-component="top" data-md-state="hidden">
            <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M13 20h-2V8l-5.5 5.5-1.42-1.42L12 4.16l7.92 7.92-1.42 1.42L13 8v12z"/></svg>
          </a>
        
      </main>
      
        
<footer class="md-footer">
  
    <nav class="md-footer__inner md-grid" aria-label="Footer">
      
        
        <a href="../installation-and-usage/" class="md-footer__link md-footer__link--prev" aria-label="Previous: Installation &amp; Usage" rel="prev">
          <div class="md-footer__button md-icon">
            <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11h12z"/></svg>
          </div>
          <div class="md-footer__title">
            <div class="md-ellipsis">
              <span class="md-footer__direction">
                Previous
              </span>
              Installation & Usage
            </div>
          </div>
        </a>
      
      
        
        <a href="../using-factories/" class="md-footer__link md-footer__link--next" aria-label="Next: Using The Factories" rel="next">
          <div class="md-footer__title">
            <div class="md-ellipsis">
              <span class="md-footer__direction">
                Next
              </span>
              Using The Factories
            </div>
          </div>
          <div class="md-footer__button md-icon">
            <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M4 11v2h12l-5.5 5.5 1.42 1.42L19.84 12l-7.92-7.92L10.5 5.5 16 11H4z"/></svg>
          </div>
        </a>
      
    </nav>
  
  <div class="md-footer-meta md-typeset">
    <div class="md-footer-meta__inner md-grid">
      <div class="md-footer-copyright">
        
        Made with
        <a href="https://squidfunk.github.io/mkdocs-material/" target="_blank" rel="noopener">
          Material for MkDocs
        </a>
        
      </div>
      
    </div>
  </div>
</footer>
      
    </div>
    <div class="md-dialog" data-md-component="dialog">
      <div class="md-dialog__inner md-typeset"></div>
    </div>
    <script id="__config" type="application/json">{"base": "../..", "features": ["navigation.sections", "navigation.top", "navigation.tabs"], "translations": {"clipboard.copy": "Copy to clipboard", "clipboard.copied": "Copied to clipboard", "search.config.lang": "en", "search.config.pipeline": "trimmer, stopWordFilter", "search.config.separator": "[\\s\\-]+", "search.placeholder": "Search", "search.result.placeholder": "Type to start searching", "search.result.none": "No matching documents", "search.result.one": "1 matching document", "search.result.other": "# matching documents", "search.result.more.one": "1 more on this page", "search.result.more.other": "# more on this page", "search.result.term.missing": "Missing", "select.version.title": "Select version"}, "search": "../../assets/javascripts/workers/search.477d984a.min.js", "version": null}</script>
    
    
      <script src="../../assets/javascripts/bundle.82b56eb2.min.js"></script>
      
    
  </body>
</html>